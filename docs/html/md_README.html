<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Incursion: Incursion (téma Tower attack)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Incursion
   </div>
   <div id="projectbrief">Towerattackgame</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Incursion (téma Tower attack) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Téma z progtestu</h2>
<p>Naprogramujte jendoduchou grafickou tower ATTACK hru (nejedná se o tower defense)</p>
<p>Váš engine:</p>
<ol type="1">
<li>ze souboru nahraje definici ÚTOČNÍKŮ (jméno, životy, rychlost, útok, odolnost na určitý typ věže ...)</li>
<li>ze souboru nahraje možné mapy a typy obranných věží (životy, rychlost, dosah, útok, odolnost na určitý typ věže ,...)</li>
<li>implementuje jednoduchou interakci věž vs. útočníci (útok, proběhnutí, ...), počitadlo skóre, detekci vítězství (po nezabití x útočníků)</li>
<li>implementuje jednoduchou AI řídící rozmisťování věží</li>
<li>umožňuje ukládat a načítat rozehrané hry Engine může fungovat jako real-time hra, či tahová hra.</li>
</ol>
<p>Jak může vypadat mapa?</p>
<p>" "prázdné místa pro pohyb útočníku a stavbu věží, I označuje věže, # označuje zeď, @ a % jsou různé druhy útočníků, &lt;= jsou vstupy/výstupy z mapy.</p>
<div class="fragment"><div class="line">#################################################</div><div class="line">#                        #       @@  #   @@  @@&lt;=3</div><div class="line">#         #              #    %I  @  ###        #</div><div class="line">#         #              #    %#  @    #    I   #</div><div class="line">&lt;=%%%     #              I    %#       #@  @@  &lt;=1</div><div class="line">#         #              I    %#       @@   I   #</div><div class="line">#                        I    %#                #</div><div class="line">#                 %%%       %%%#    @          &lt;=2</div><div class="line">#################################################    </div></div><!-- fragment --><p> Cesta kudy se budou útočníci ubírat bude vždy nejkratší možná vzhledem ke zdím a věžím. Můžete navíc implementovat více strategií procházení, kde každý útočník bude mít svoji strategii. Například slabší marvenci se mohou snažit vyhýbat věžím, naopak odolnější zase mohou být pomalejší a vždy musí udělat alespoň X kroků rovně.</p>
<p>Hráč volí vstup a typy útočníků</p>
<p>Kde lze využít polymorfismus? (doporučené)</p><ul>
<li>Parametry útočníků: znak, barva, rychlost, životy, ...</li>
<li>Efekty útoku věží: zranění, zpomalení, ...</li>
<li>Políčka mapy: volno, věž, útočník ...</li>
<li>Uživatelské rozhraní: konzole, ncurses, SDL, OpenGL (různé varianty), ...</li>
</ul>
<p>Ukázky:</p><ul>
<li><a href="http://en.wikipedia.org/wiki/Tower_defense">http://en.wikipedia.org/wiki/Tower_defense</a> (tower-attack opačná varianta od tower-defense)</li>
<li><a href="http://store.steampowered.com/app/251530/">http://store.steampowered.com/app/251530/</a></li>
<li><a href="http://www.youtube.com/watch?v=4eV4918kReE">http://www.youtube.com/watch?v=4eV4918kReE</a></li>
<li><a href="http://www.newgrounds.com/portal/view/576124">http://www.newgrounds.com/portal/view/576124</a></li>
</ul>
<h2>Zadání hry Incursion</h2>
<p>Vytvoříme hru, která se spustí v konzoli a reaguje na stisk jednotlivých kláves, ne celých příkazů. Po startu se spustí úvodní menu ve kterém má hráč několik možností:</p><ol type="1">
<li><em>Nová hra</em> - načte novou hru ze souboru s příponou <em>map</em>, který má specifický formát (viz dále)</li>
<li><em>Načtení uložené hry</em> - načte hru, která byla v některém předchozím běhu uložena do souboru. Soubor je zakončen příponou <em>sav</em></li>
<li><em>Ukončení</em> - tato možnost je k dispozici v průběhu celého běhu programu krom zadávání jména mapy pomocí klávesy <em>q</em></li>
</ol>
<p>Po načtení mapy a definice útočníku ze souboru se spustí samotná hra. Ve vrchní části obrazovky jsou vidět vlny do kterých může uživatel přidávat útočníky, zároveň je zde výběr útočníků a nakonec současný stav prostředků hráče a životy nepřítele. V dolní části obrazovky je samotná mapa, například v následujícím formátu: </p><div class="fragment"><div class="line">#############################</div><div class="line">1    #         #            #</div><div class="line"># ## #  #%###  #  #######   #</div><div class="line"># #  #      #     # #       #</div><div class="line"># ######### ##*#  # #    ####</div><div class="line">#  #      #    #    #    #  #</div><div class="line">##     ####    ######    #  #</div><div class="line">#    ###@@@  #   #          #</div><div class="line">#        #   #####    #######</div><div class="line">#        #     #            #</div><div class="line">#####################O#######</div></div><!-- fragment --> <blockquote class="doxtable">
<p>V ukázkové mapě lze vidět útočníky (<b>), věže (__*</b>, <b>%</b>) a bránu (<b>O</b>) </p>
</blockquote>
<h3>Definice souboru</h3>
<p>Soubory ve kterých jsou uložené rozehrané hry nebo nové mapy mají podobnou strukturu. Je pevně daná - každý řádek začíná určitým znakem ve formátu <code>(C)</code>, kde C je znak který určuje objekt, který načítáme. Každý znak se může v souboru vyskytovat jen jednou, to zamezuje redefinici dat. Následuje ukázka souboru ve kterém je uložená rozehraná hra.</p>
<p>Mapa má přípustné rozdílné hodnoty v případě, že se jedná o rozehranou hru (jsou povoleny rozmístěné věže a útočníci). Stejně tak ve vlnách je povoleno mít jednotky pouze v případě, že je hra rozehraná. </p><div class="fragment"><div class="line">--Zásobník vzorů--</div><div class="line">(U)</div><div class="line">T @ 20 60 50 30             -- pěšák: znak, cena, život, rychlost, útok</div><div class="line">A $ 20 80 40 40 90          -- obrněná jednotka: znak, cena, život, rychlost, útok, brnění</div><div class="line">M % 20 20 3 30              -- mágova věž: znak, rychlost, útok, dostřel, rychlost šíření vln</div><div class="line">R * 20 20 3                 -- lukostřelecká věž: znak, rychlost, útok, dostřel</div><div class="line"></div><div class="line"></div><div class="line">--Vlny--</div><div class="line">(W)                         -- počet a velikost se odvodí z formátu</div><div class="line">0 20 300                    -- značí zda je zrovna spuštěná vlna nebo ne, rychlost spawneru, zdroje dostupné pro hru</div><div class="line">[@    ]                     -- včetně uložených jednotek</div><div class="line">[     ]</div><div class="line"></div><div class="line">--Mapa--</div><div class="line">(M)</div><div class="line"> 6 5 (20 100)               -- dimenze mapy - řádek, sloupec, brána (aktuální, max život)</div><div class="line">#####                       -- mapa</div><div class="line"># # O</div><div class="line">1   #</div><div class="line">#   #</div><div class="line">#   #</div><div class="line">#####                           --Vojáci a věže na mapě--</div><div class="line">@ (10 10) 10                -- znak, pozice, aktuální frame</div><div class="line">$ (1 1) 2, 20               -- znak, pozice, aktuální frame, stav brnění</div><div class="line">% (2 2) 10                  -- znak, pozice, aktuální frame, aktuální vlna</div><div class="line">* (2 2) 10                  -- znak, pozice, aktuální frame</div></div><!-- fragment --> <blockquote class="doxtable">
<p>Ukázka souboru</p>
<p></p>
</blockquote>
<h3>Pravidla hry</h3>
<p>Cílem hráče je dostat co největší množství svých jednotek přes věže, které budou na vojáky přirozeně útočit, aby jim zabránily v postupu. V průběhu hry hráč spotřebovává prostředky, díky kterým může vysílat lepší jednotky do boje. V případě, že útočník dorazí až do cíle, poškodí bránu. V případě zabití nepřítele přirozené vyhrává hráč. Prohra nastává v případě, kdy hráči došly všechny prostředky a brána stále stojí.</p>
<h3>Nástin implementace</h3>
<p>Hlavní třídá celé hry je <code><a class="el" href="classCApplication.html">CApplication</a></code>, která spouští celý program a main loop. Je v ní třídá <code><a class="el" href="classCInterface.html">CInterface</a></code>, která se stará o komunikaci s uživatelem. Dále obsahuje hru <code><a class="el" href="classCGame.html">CGame</a></code>, která se stará o chod aktuální hry. Hra se skládá z více entit, jednou z nich je mapa <code><a class="el" href="classCMap.html">CMap</a></code>, poté úložiště všech jednotek <code><a class="el" href="classCUnitStack.html">CUnitStack</a></code> a nakonec vlny s útočníky <code><a class="el" href="classCWaves.html">CWaves</a></code>. K samotnému vykreslování slouží třída <code><a class="el" href="classCBuffer.html">CBuffer</a></code>, která do sebe ukládá jednotlivé řádky výpisu a je schopná je centrovat a připojovat k sobě jiné buffery.</p>
<h3>Kde mám polymorfismus</h3>
<p>Polymorfismus využívám ve třídě <code><a class="el" href="classCTower.html">CTower</a></code>, která má virtuální metodu <code>Attack</code>. Metoda <code>Attack</code> simuluje útok věže na vojáka s tím, že <code><a class="el" href="classCTower.html">CTower</a></code> je pouze jednoduchá věž s jedním lukostřelcem a vysílá tedy pouze jeden šíp s menším poškozením. Tuto metodu přetěžuje její potomek <code><a class="el" href="classCMageTower.html">CMageTower</a></code>, která už implementuje sofistikovanější útok s pomocí temných mágů, kteří všude kolem své věže vysílají elektrické paprsky (<code>Attack</code> tedy poškozuje jednotky v celém svém okolí).</p>
<p>Další příklad polymorfismu je ve třídě <code><a class="el" href="classCTrooper.html">CTrooper</a></code>, která má virtuální metodu a <code>ReceiveDamage</code>. Jejím potomkem je <code><a class="el" href="classCArmoredTrooper.html">CArmoredTrooper</a></code>. Metoda <code>ReceiveDamage</code> je u základního vojáka triviální, ale <code><a class="el" href="classCArmoredTrooper.html">CArmoredTrooper</a></code> má navíc schopnost se na určitý kroků obrnit a ignorovat velkou část poškození. Další metodou kterou tento potomek implementuje je <code>Move</code>, který zajišťuje pohyb jednotky na mapě a případnou aktualizaci jejích stavů. Obrněný voják se pohybuje co nejpřímější cestou k cíli, ale slabší jednotky využívají strategii vyhýbaní se věžím. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
